<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/head :: head('catalog.details.title')}"></head>
<body>
<div th:insert="~{menunavy::navy}"></div>

<main class="container mt-4">

    <div class="d-flex justify-content-between align-items-center">
        <a th:href="@{/catalog}" class="btn btn-outline-secondary" th:text="#{catalog.back}">
            ← Back to catalog
        </a>
        <a class="btn btn-outline-secondary" th:href="@{/(lang=${#locale.language})}" th:text="#{home}">Home</a>
    </div>

    <div class="card mt-3">
        <div class="card-body">

            <h2 class="mb-1" th:text="${appliance.name}">Name</h2>

            <div class="text-muted mb-3">
                <span th:text="${appliance.manufacturerName}">Manufacturer</span>
                <span th:if="${appliance.category != null}"> • <span th:text="${appliance.category}">Category</span></span>
                <span th:if="${appliance.model != null}"> • <span th:text="${appliance.model}">Model</span></span>
            </div>

            <p class="mb-4" th:text="${appliance.description}">Description</p>

            <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
                <div class="fs-4 fw-bold" th:text="${appliance.price}">0</div>

                <form sec:authorize="hasRole('CLIENT')"
                      th:action="@{/catalog/{id}/add-to-cart(id=${appliance.id})}"
                      method="post"
                      class="d-flex gap-2 align-items-center">
                    <input type="number" name="quantity" min="1" value="1"
                           class="form-control" style="width: 120px;">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button class="btn btn-success" type="submit" th:text="#{catalog.addToCart}">
                        Add to cart
                    </button>
                </form>
            </div>

        </div>
    </div>

</main>

<div th:insert="~{footer::footer}"></div>
</body>
</html>
